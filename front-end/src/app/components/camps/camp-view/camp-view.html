<ew-page-header id="top" size="compact" on-action="$ctrl.onAction(action, value)" header-title="Visualizza campo">
  <right-side>
    <button ng-if="$ctrl.isEdit()" class="btn btn-sm btn-default btn-flat btn-condensed pull-right" type="button"
      ng-click="$ctrl.stateReload($ctrl.router.currentState.name)">
      <i class="far fa-sync fa-fw text-primary"></i> Ricarica dati
    </button>
  </right-side>
</ew-page-header>

<div class="container">

  <row style="grid-template-columns: 1fr 360px">
    <div>
      <ew-ibox>
        <ibox-title>
          <h5>Dati Campo</h5>
        </ibox-title>

        <ibox-content>
          <div class="low-impact">

            <row style="grid-template-columns: 70px 220px 1fr 1fr">
              <ew-readonly-input label="N. scheda" value="$ctrl.model.n_scheda"></ew-readonly-input>
              <ew-readonly-input label="Nome campo" value="$ctrl.model.nome"></ew-readonly-input>
              <ew-readonly-input label="Descrizione (uso interno)" value="$ctrl.model.note"></ew-readonly-input>
              <ew-readonly-input label="Capogruppo" value="$ctrl.model.capogruppo.cognome_nome"></ew-readonly-input>
            </row>

            <row style="grid-template-columns: 120px 120px 170px">
              <ew-readonly-input label="Data inizio" value="$ctrl.model.data_inizio" type="date"></ew-readonly-input>
              <ew-readonly-input label="Data fine" value="$ctrl.model.data_fine" type="date"></ew-readonly-input>
              <ew-readonly-input label="Tipo" value="$ctrl.model.tipo"></ew-readonly-input>
            </row>

            <h5>Dati documento fiscale</h5>

            <row style="grid-template-columns: 1fr 140px 160px 120px">
              <ew-readonly-input label="Intestazione (Ragione sociale / nome cognome)"
                value="$ctrl.model.fattura_ragione_sociale"></ew-readonly-input>
              <ew-readonly-input label="Partita IVA" value="$ctrl.model.fattura_partita_iva"></ew-readonly-input>
              <ew-readonly-input label="Codice fiscale" value="$ctrl.model.fattura_codice_fiscale"></ew-readonly-input>
              <ew-readonly-input label="Tipo doc. fiscale" value="$ctrl.model.tipo_documento_fiscale">
              </ew-readonly-input>
            </row>

            <row style="grid-template-columns: 1fr 180px 120px 120px 90px">
              <ew-readonly-input label="Indirizzo" value="$ctrl.model.fattura_indirizzo"></ew-readonly-input>
              <ew-readonly-input label="CittÃ " value="$ctrl.model.fattura_citta"></ew-readonly-input>
              <ew-readonly-input label="Nazione" value="$ctrl.model.fattura_nazione"></ew-readonly-input>
              <ew-readonly-input label="Provincia" value="$ctrl.model.fattura_provincia"></ew-readonly-input>
              <ew-readonly-input label="CAP" value="$ctrl.model.fattura_cap"></ew-readonly-input>
            </row>
          </div>
        </ibox-content>
      </ew-ibox>
    </div>

    <div>
      <ew-ibox>
        <ibox-title>
          <h5>Contatori</h5>
        </ibox-title>
        <ibox-content>
          <section class="low-impact" id="contatori">
            <row style="grid-template-columns: 1fr 100px 100px; margin-bottom: 8px">
              <b></b>
              <b class="text-center">Ingresso</b>
              <b class="text-center">Uscita</b>
            </row>

            <row style="grid-template-columns: 1fr 100px 100px">
              <label>ACQUA</label>
              <ew-readonly-input value="$ctrl.model.in1" type="numeric"></ew-readonly-input>
              <ew-readonly-input value="$ctrl.model.out1" type="numeric"></ew-readonly-input>
            </row>

            <row style="grid-template-columns: 1fr 100px 100px">
              <label>ENEL segreteria</label>
              <ew-readonly-input value="$ctrl.model.in2" type="numeric"></ew-readonly-input>
              <ew-readonly-input value="$ctrl.model.out2" type="numeric"></ew-readonly-input>
            </row>

            <row style="grid-template-columns: 1fr 100px 100px">
              <label>ENEL parco</label>
              <ew-readonly-input value="$ctrl.model.in3" type="numeric"></ew-readonly-input>
              <ew-readonly-input value="$ctrl.model.out3" type="numeric"></ew-readonly-input>
            </row>

            <row style="grid-template-columns: 1fr 100px 100px">
              <label>ENEL locali</label>
              <ew-readonly-input value="$ctrl.model.in4" type="numeric"></ew-readonly-input>
              <ew-readonly-input value="$ctrl.model.out4" type="numeric"></ew-readonly-input>
            </row>

            <row style="grid-template-columns: 1fr 100px 100px">
              <label>GAS</label>
              <ew-readonly-input value="$ctrl.model.in5" type="numeric"></ew-readonly-input>
              <ew-readonly-input value="$ctrl.model.out5" type="numeric"></ew-readonly-input>
            </row>
          </section>

        </ibox-content>
      </ew-ibox>
    </div>

  </row>

  <row style="grid-template-columns: repeat(6, 1fr)" class="mar-top-2 mar-bottom-3">
    <button type="button" class="btn btn-danger">Chiudi campo</button>
    <button type="button" class="btn btn-primary" ui-sref="camps.view.guests.add">Aggiungi iscritto</button>
    <button type="button" class="btn btn-success">Ipotesi di spesa</button>
    <button type="button" class="btn btn-warning">Camere campo</button>
    <button type="button" class="btn btn-default">Stampa lista utenti campo</button>
    <button type="button" class="btn btn-default">Stampa lista utenti questura</button>
  </row>

  <div id="tabs">
    <uib-tabset active="$ctrl.activeTab">

      <uib-tab index="0" heading="Ospiti ({{ $ctrl.model.reservations.length }})" select="$ctrl.selectTab('ospiti')"
        title="Ospiti (ctrl+1)">
        <ew-ibox>
          <ibox-title>
            <h5>Ospiti</h5>
          </ibox-title>
          <ibox-content>
            <div class="table-responsive">
              <table class="table table-striped table-bordered table-hover">
                <thead>
                  <tr>
                    <th class="w_xs text-center">
                      <input type="checkbox">
                    </th>
                    <th>Nome</th>
                    <th>Cognome</th>
                    <th>Arrivo</th>
                    <th>Partenza</th>
                    <th class="actions"></th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="r in $ctrl.model.reservations track by r.id">
                    <td class="w_xs text-center">
                      <input type="checkbox">
                    </td>
                    <td>{{ r.guest.nome }}</td>
                    <td>{{ r.guest.cognome }}</td>
                    <td>
                      <span ng-if="!r.data_in"><label><input type="checkbox" ng-model="r.flag_in"
                            ng-change="$ctrl.checkIn(r)"> Check in</label></span>
                      <span ng-if="r.data_in">{{ r.data_in | date:'dd/MM/yyyy' }}</span>
                    </td>
                    <td>
                      <span ng-if="!r.data_out"><label><input type="checkbox" ng-disabled="!r.data_in"
                            ng-model="r.flag_out" ng-change="$ctrl.checkOut(r)"> Check out</label></span>
                      <span ng-if="r.data_out">{{ r.data_out | date:'dd/MM/yyyy' }}</span>
                    </td>
                    <td class="actions">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </ibox-content>
        </ew-ibox>
      </uib-tab>

      <uib-tab index="1" heading="SPP ({{ $ctrl.model.spp.length }})" select="$ctrl.selectTab('spp')"
        title="SPP (ctrl+2)">
        <clients-spp-items after-upload-change="$ctrl.afterUploadChange()" on-delete="$ctrl.deleteSppItem($event)"
          on-edit="$ctrl.editSppItem($event)" on-save="$ctrl.onAddItemSpp($event)"
          on-set-missing-spp="$ctrl.onSetMissingSpp()" consultants="$ctrl.lookup.Consultants.list"
          employees="$ctrl.model.employees" items="$ctrl.model.spp" items-missing="$ctrl.model.spp_missing"
          items-incompleti="$ctrl.model.spp_incompleti" items-options="$ctrl.lookup.Items['4']"
          is-auth="$ctrl.isAuthorized('spp')">
        </clients-spp-items>
      </uib-tab>

    </uib-tabset>


  </div>